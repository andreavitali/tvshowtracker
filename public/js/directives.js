/* Fallback if image not available */
angular.module('directives', ['filters'])
.directive('fallbackSrc', function () {
    var missingDefault = "data:image/png;base64,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";
    return {
        restrict: 'A',
        link: function (scope, element, attr) {
            if (element[0].src == "")
                element[0].src = missingDefault;
            element.on('error', function () {
                element[0].src = attr.fallbackSrc ? attr.fallbackSrc : missingDefault;
            });
        }
    };
});